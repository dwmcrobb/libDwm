\doxysection{Dwm\+::Load\+Balancer\texorpdfstring{$<$}{<} ItemT \texorpdfstring{$>$}{>} Class Template Reference}
\hypertarget{classDwm_1_1LoadBalancer}{}\label{classDwm_1_1LoadBalancer}\index{Dwm::LoadBalancer$<$ ItemT $>$@{Dwm::LoadBalancer$<$ ItemT $>$}}


A simple load balancer class template which balances work across \doxylink{classDwm_1_1LoadBalancer_1_1Worker}{Worker} objects that each run in their own thread.  




{\ttfamily \#include $<$Dwm\+Load\+Balancer.\+hh$>$}

\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classDwm_1_1LoadBalancer_1_1Worker}{Worker}}
\begin{DoxyCompactList}\small\item\em \doxylink{classDwm_1_1LoadBalancer_1_1Worker}{Worker} class for \doxylink{classDwm_1_1LoadBalancer}{Load\+Balancer}. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{classDwm_1_1LoadBalancer_aba7459da16f9e6df6b679c1c10ecf1bb}{Add\+Worker}} (\mbox{\hyperlink{classDwm_1_1LoadBalancer_1_1Worker}{Worker}} \texorpdfstring{$\ast$}{*}worker)
\begin{DoxyCompactList}\small\item\em Adds the given worker to the load balancer. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classDwm_1_1LoadBalancer_a3616262405ae78a1b27f61ef1f25d086}{Add\+Work}} (ItemT item)
\begin{DoxyCompactList}\small\item\em Adds work to be done with load balancing. \end{DoxyCompactList}\item 
\Hypertarget{classDwm_1_1LoadBalancer_a8288693713ea6949b0295624a9c9a827}\label{classDwm_1_1LoadBalancer_a8288693713ea6949b0295624a9c9a827} 
{\footnotesize template$<$typename Input\+Iterator $>$ }\\bool {\bfseries Add\+Work} (Input\+Iterator first\+Iter, Input\+Iterator last\+Iter)
\begin{DoxyCompactList}\small\item\em Adds work to be done with load balancing. \end{DoxyCompactList}\item 
\Hypertarget{classDwm_1_1LoadBalancer_ad3dab569622c7adf3f46ab9aeb1d2955}\label{classDwm_1_1LoadBalancer_ad3dab569622c7adf3f46ab9aeb1d2955} 
void {\bfseries Stop} ()
\begin{DoxyCompactList}\small\item\em Calls \doxylink{classDwm_1_1LoadBalancer_1_1Worker_a7484cebfcdb0083b26c98c8a1027ee7b}{Worker\+::\+Stop()} on all encapsulated \doxylink{classDwm_1_1LoadBalancer_1_1Worker}{Worker} objects. \end{DoxyCompactList}\item 
const std\+::vector$<$ std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classDwm_1_1LoadBalancer_1_1Worker}{Worker}} $>$ $>$ \& \mbox{\hyperlink{classDwm_1_1LoadBalancer_ac5cf32dcf56cc178f15e58a6e3f7e364}{Workers}} () const
\begin{DoxyCompactList}\small\item\em Returns a const reference to the encapsulated workers. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\subsubsection*{template$<$typename ItemT$>$\newline
class Dwm\+::\+Load\+Balancer$<$ Item\+T $>$}
A simple load balancer class template which balances work across \doxylink{classDwm_1_1LoadBalancer_1_1Worker}{Worker} objects that each run in their own thread. 

A user would derive a worker class from Load\+Balancer$<$\+Item\+T$>$\+::\+Worker, and implement the Worker\+::\+Process\+Work(\+Item\+T) member. The worker can be added to a \doxylink{classDwm_1_1LoadBalancer}{Load\+Balancer} via the \doxylink{classDwm_1_1LoadBalancer_aba7459da16f9e6df6b679c1c10ecf1bb}{Load\+Balancer\+::\+Add\+Worker()} member. Work can be added to the \doxylink{classDwm_1_1LoadBalancer}{Load\+Balancer} with \doxylink{classDwm_1_1LoadBalancer_a3616262405ae78a1b27f61ef1f25d086}{Add\+Work(\+Item\+T)}. A unit of work is encapsulated in the ItemT template parameter. This is a template so that any copyable type can be used as a unit of work.

Today, this class template may not be all that useful (we have the concurrency features of C++11 and C++14). I originally wrote this class using pthreads, before we had C++11 and C++14. It\textquotesingle{}s still in use in some of my code, but I may revisit this soon and modernize it. For now the only modernization is the migration to std\+::thread. 

\doxysubsection{Member Function Documentation}
\Hypertarget{classDwm_1_1LoadBalancer_a3616262405ae78a1b27f61ef1f25d086}\index{Dwm::LoadBalancer$<$ ItemT $>$@{Dwm::LoadBalancer$<$ ItemT $>$}!AddWork@{AddWork}}
\index{AddWork@{AddWork}!Dwm::LoadBalancer$<$ ItemT $>$@{Dwm::LoadBalancer$<$ ItemT $>$}}
\doxysubsubsection{\texorpdfstring{AddWork()}{AddWork()}}
{\footnotesize\ttfamily \label{classDwm_1_1LoadBalancer_a3616262405ae78a1b27f61ef1f25d086} 
template$<$typename ItemT $>$ \\
bool \mbox{\hyperlink{classDwm_1_1LoadBalancer}{Dwm\+::\+Load\+Balancer}}$<$ ItemT $>$\+::\+Add\+Work (\begin{DoxyParamCaption}\item[{ItemT}]{item}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Adds work to be done with load balancing. 

Returns true on success, false on failure. \Hypertarget{classDwm_1_1LoadBalancer_aba7459da16f9e6df6b679c1c10ecf1bb}\index{Dwm::LoadBalancer$<$ ItemT $>$@{Dwm::LoadBalancer$<$ ItemT $>$}!AddWorker@{AddWorker}}
\index{AddWorker@{AddWorker}!Dwm::LoadBalancer$<$ ItemT $>$@{Dwm::LoadBalancer$<$ ItemT $>$}}
\doxysubsubsection{\texorpdfstring{AddWorker()}{AddWorker()}}
{\footnotesize\ttfamily \label{classDwm_1_1LoadBalancer_aba7459da16f9e6df6b679c1c10ecf1bb} 
template$<$typename ItemT $>$ \\
void \mbox{\hyperlink{classDwm_1_1LoadBalancer}{Dwm\+::\+Load\+Balancer}}$<$ ItemT $>$\+::\+Add\+Worker (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classDwm_1_1LoadBalancer_1_1Worker}{Worker}} \texorpdfstring{$\ast$}{*}}]{worker}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Adds the given worker to the load balancer. 

Note that on return, the caller no longer owns {\ttfamily worker}. It is assigned to a unique\+\_\+ptr that is owned by the \doxylink{classDwm_1_1LoadBalancer}{Load\+Balancer}. \Hypertarget{classDwm_1_1LoadBalancer_ac5cf32dcf56cc178f15e58a6e3f7e364}\index{Dwm::LoadBalancer$<$ ItemT $>$@{Dwm::LoadBalancer$<$ ItemT $>$}!Workers@{Workers}}
\index{Workers@{Workers}!Dwm::LoadBalancer$<$ ItemT $>$@{Dwm::LoadBalancer$<$ ItemT $>$}}
\doxysubsubsection{\texorpdfstring{Workers()}{Workers()}}
{\footnotesize\ttfamily \label{classDwm_1_1LoadBalancer_ac5cf32dcf56cc178f15e58a6e3f7e364} 
template$<$typename ItemT $>$ \\
const std\+::vector$<$ std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classDwm_1_1LoadBalancer_1_1Worker}{Worker}} $>$ $>$ \& \mbox{\hyperlink{classDwm_1_1LoadBalancer}{Dwm\+::\+Load\+Balancer}}$<$ ItemT $>$\+::\+Workers (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Returns a const reference to the encapsulated workers. 

NOT thread safe! This is mostly just for unit testing. 

The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{DwmLoadBalancer_8hh}{Dwm\+Load\+Balancer.\+hh}}\end{DoxyCompactItemize}
