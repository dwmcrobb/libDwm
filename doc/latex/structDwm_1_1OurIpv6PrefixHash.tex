\doxysection{Dwm\+::Our\+Ipv6\+Prefix\+Hash Struct Reference}
\hypertarget{structDwm_1_1OurIpv6PrefixHash}{}\label{structDwm_1_1OurIpv6PrefixHash}\index{Dwm::OurIpv6PrefixHash@{Dwm::OurIpv6PrefixHash}}


Default hash for our unordered\+\_\+map in \doxylink{classDwm_1_1Ipv6PrefixMap}{Ipv6\+Prefix\+Map}.  




{\ttfamily \#include $<$Dwm\+Ipv6\+Prefix\+Map.\+hh$>$}

\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{structDwm_1_1OurIpv6PrefixHash_a100ba0010dbdd1fb75fe80e8a99a3699}\label{structDwm_1_1OurIpv6PrefixHash_a100ba0010dbdd1fb75fe80e8a99a3699} 
size\+\_\+t {\bfseries operator()} (const \mbox{\hyperlink{classDwm_1_1Ipv6Prefix}{Dwm\+::\+Ipv6\+Prefix}} \&pfx) const
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Default hash for our unordered\+\_\+map in \doxylink{classDwm_1_1Ipv6PrefixMap}{Ipv6\+Prefix\+Map}. 

On a Threadripper 3960X, this gets me over 13 million longest-\/match lookups per second with the IPV6\+\_\+prefixes.\+202010122 file in the tests directory. The data in IPV6\+\_\+prefixes.\+202010122 comes from routeviews via CAIDA.

The implementation uses xxhash. I tried some other techniques, but they worked very poorly on some architectures (Xeon L5640, 2018 Macbook Pro). This is at least consistent. On a Threadripper 3960X, I get about 1.\+5 million longest-\/match lookups/sec.

Note that the interfaces are all single-\/threaded internally. Hence the performance scales with CPU clock, memory bandwidth, on-\/die cache, etc. and NOT the number of CPU cores. However, multiple threads can safely call any of the public members since we have shared/unique locks providing protection. The overhead of the locks is insignificant for members like Find\+Longest(), but measurable for members like Find(). This is a tradeoff I\textquotesingle{}m willing to make in order to maintain enforcement of thread safety in my use. I rarely write single-\/threaded C++ code these days, and built-\/in thread safety makes my life easier. 

The documentation for this struct was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{DwmIpv6PrefixMap_8hh}{Dwm\+Ipv6\+Prefix\+Map.\+hh}}\end{DoxyCompactItemize}
